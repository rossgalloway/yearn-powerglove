# Repository Guidelines

## Project Structure & Module Organization
- `src/` contains the app: `components/` for Radix + Tailwind UI, `routes/` for TanStack Router screens, `contexts/` for shared state, `graphql/` for queries, `hooks/`, `utils/`, and strongly typed models in `types/`.
- Tests default to `src/__tests__/` (see `charts.test.tsx`); co-locate new suites as `*.test.ts(x)` when it improves readability.
- `routeTree.gen.ts` is generated by the router plugin and should not be hand-edited. `docs/` holds methodology notes, `public/` serves static assets, and `dist/` is build output.

## Build, Test, and Development Commands
- `npm run dev` – Launch the Vite dev server with HMR.
- `npm run build` – Type-check via `tsc -b` and create the production bundle.
- `npm run preview` – Serve the latest build for local smoke tests.
- `npm run test` / `npm run test:watch` – Execute Vitest suites once or in watch mode.
- `npm run lint` / `npm run format` – Apply ESLint and Prettier; run both before pushing changes.

## Coding Style & Naming Conventions
- Favor TypeScript-first patterns: reuse interfaces from `src/types/`, avoid `any`, and import with the `@/` alias instead of relative chains.
- Components are PascalCase, hooks begin with `use`, helpers/utilities stay camelCase, and route filenames mirror their URL segments.
- Prettier + ESLint enforce 2-space indentation, single quotes, and React hook rules. Tailwind utilities should follow the existing ordering patterns in `src/styles/globals.css`.

## Testing Guidelines
- Vitest runs with jsdom and Testing Library; shared mocks (ResizeObserver for Recharts) live in `setupTests.ts`.
- Target loading, empty, and hydrated states for dashboards and contexts; mock Apollo calls rather than touching live services.
- Run `npm run test` before opening a PR and document notable coverage gaps or flaky suites.

## Commit & Pull Request Guidelines
- Follow the Conventional Commit style seen in history (`feat:`, `fix:`, `chore:`) and keep subjects imperative (`fix: restore APR line overlap`).
- PRs should summarize user impact, reference issues, list manual/automated checks, and attach UI screenshots or GIFs when visuals change.
- Call out schema or configuration updates explicitly, including required `.env` adjustments.

## Environment & Configuration
- Duplicate `.env.example` to `.env` and supply values such as `VITE_PUBLIC_GRAPHQL_URL`; never commit populated files.
- Network clients live in `src/lib/apollo-client.ts` and `src/wagmi.ts`; update both when pointing to new services.
- Ensure new environment variables use the `VITE_` prefix so Vite can expose them to the browser.
